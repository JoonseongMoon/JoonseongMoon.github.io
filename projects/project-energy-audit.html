<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Energy Audit Assistant — Joonseong</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Instrument+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0a;
    --surface: #141414;
    --surface-hover: #1a1a1a;
    --border: #222;
    --border-light: #333;
    --text: #e8e6e1;
    --text-muted: #8a8780;
    --accent: #c4a882;
    --accent-dim: #8a7560;
    --accent-glow: rgba(196,168,130,0.08);
    --tag-bg: #1a1916;
    --tag-border: #2a2820;
    --code-bg: #111;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; scrollbar-width: thin; scrollbar-color: var(--border-light) transparent; }

  body {
    font-family: 'Instrument Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
  }

  /* ─── Nav ─── */
  nav {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100;
    padding: 1.25rem 3rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(10,10,10,0.8);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
  }

  .nav-logo {
    font-family: 'DM Serif Display', serif;
    font-size: 1.3rem;
    color: var(--text);
    text-decoration: none;
    letter-spacing: -0.02em;
  }
  .nav-logo span { color: var(--accent); }

  .back-link {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.82rem;
    font-weight: 500;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    transition: color 0.3s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .back-link:hover { color: var(--accent); }

  /* ─── Project Hero ─── */
  .project-hero {
    padding: 10rem 3rem 4rem;
    max-width: 900px;
    margin: 0 auto;
    opacity: 0;
    animation: fadeUp 0.8s ease 0.2s forwards;
  }

  .project-hero-category {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .project-hero-category::before {
    content: '';
    width: 24px;
    height: 1px;
    background: var(--accent-dim);
  }

  .project-hero h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(2.2rem, 5vw, 3.5rem);
    font-weight: 400;
    line-height: 1.12;
    letter-spacing: -0.02em;
    margin-bottom: 1.5rem;
  }

  .project-hero-desc {
    font-size: 1.1rem;
    color: var(--text-muted);
    line-height: 1.8;
    max-width: 650px;
    margin-bottom: 2rem;
  }

  .project-meta-row {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
  }

  .project-meta-item {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
  }

  .project-meta-item .label {
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--text-muted);
  }

  .project-meta-item .value {
    font-size: 0.88rem;
    color: var(--text);
  }

  .project-meta-item .value a {
    color: var(--accent);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color 0.3s;
  }
  .project-meta-item .value a:hover { border-color: var(--accent); }

  /* ─── Cover Image ─── */
  .project-cover {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto 4rem;
    padding: 0 3rem;
    opacity: 0;
    animation: fadeUp 0.8s ease 0.4s forwards;
  }

  .project-cover img, .project-cover .cover-placeholder {
    width: 100%;
    border-radius: 12px;
    border: 1px solid var(--border);
  }

  .cover-placeholder {
    height: 400px;
    background: linear-gradient(135deg, #1a1510, #0d1a18, #141018);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  /* ─── Content Area ─── */
  .project-content {
    max-width: 780px;
    margin: 0 auto;
    padding: 0 3rem 6rem;
  }

  /* ─── Section Blocks ─── */
  .content-section {
    margin-bottom: 4rem;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
  }

  .content-section.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .content-section-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--accent-dim);
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .content-section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  .content-section h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 1.6rem;
    font-weight: 400;
    margin-bottom: 1rem;
    letter-spacing: -0.01em;
  }

  .content-section h3 {
    font-family: 'DM Serif Display', serif;
    font-size: 1.2rem;
    font-weight: 400;
    margin: 2rem 0 0.75rem;
    letter-spacing: -0.01em;
  }

  .content-section p {
    color: var(--text-muted);
    font-size: 0.95rem;
    line-height: 1.85;
    margin-bottom: 1rem;
  }

  .content-section p strong {
    color: var(--text);
    font-weight: 500;
  }

  /* ─── Image Gallery ─── */
  .image-gallery {
    display: grid;
    gap: 1rem;
    margin: 2rem 0;
  }

  .image-gallery.cols-2 { grid-template-columns: 1fr 1fr; }
  .image-gallery.cols-3 { grid-template-columns: 1fr 1fr 1fr; }
  .image-gallery.cols-1 { grid-template-columns: 1fr; }

  .gallery-item {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid var(--border);
    background: #ffffff;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .gallery-item img {
    max-width: 500px;
    width: 100%;
    object-fit: contain;
    display: block;
    padding: 1rem;
  }

  .gallery-caption {
    padding: 0.75rem 1rem;
    font-size: 0.78rem;
    color: var(--text-muted);
    border-top: 1px solid var(--border);
    width: 100%;
    background: var(--surface);
  }

  /* ─── Code Block ─── */
  .code-block {
    margin: 2rem 0;
    border-radius: 10px;
    border: 1px solid var(--border);
    overflow: hidden;
  }

  .code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.65rem 1rem;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    color: var(--text-muted);
  }

  .code-dots {
    display: flex;
    gap: 6px;
  }
  .code-dots span {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--border-light);
  }

  .code-block pre {
    padding: 1.25rem;
    background: var(--code-bg);
    overflow-x: auto;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.7;
    color: var(--text-muted);
  }

  .code-block pre .comment { color: #555; }
  .code-block pre .keyword { color: var(--accent); }
  .code-block pre .string { color: #7a9e7a; }
  .code-block pre .function { color: #8aabcc; }
  .code-block pre .number { color: #d4a76a; }

  /* ─── Process / Journey Timeline ─── */
  .timeline {
    margin: 2rem 0;
    position: relative;
    padding-left: 2rem;
  }

  .timeline::before {
    content: '';
    position: absolute;
    left: 3px;
    top: 8px;
    bottom: 8px;
    width: 1px;
    background: var(--border);
  }

  .timeline-item {
    position: relative;
    margin-bottom: 2rem;
    padding-left: 1.5rem;
  }

  .timeline-item:last-child { margin-bottom: 0; }

  .timeline-item::before {
    content: '';
    position: absolute;
    left: -2rem;
    top: 8px;
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--accent-dim);
    border: 2px solid var(--bg);
    box-shadow: 0 0 0 1px var(--accent-dim);
  }

  .timeline-date {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--accent-dim);
    margin-bottom: 0.35rem;
    letter-spacing: 0.05em;
  }

  .timeline-title {
    font-weight: 600;
    font-size: 0.95rem;
    margin-bottom: 0.35rem;
  }

  .timeline-desc {
    color: var(--text-muted);
    font-size: 0.85rem;
    line-height: 1.7;
  }

  /* ─── Key Findings / Highlights Box ─── */
  .highlight-box {
    margin: 2rem 0;
    padding: 1.5rem 1.75rem;
    background: var(--accent-glow);
    border: 1px solid var(--tag-border);
    border-left: 3px solid var(--accent-dim);
    border-radius: 0 10px 10px 0;
  }

  .highlight-box h4 {
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: var(--accent);
  }

  .highlight-box ul {
    list-style: none;
    padding: 0;
  }

  .highlight-box ul li {
    padding: 0.35rem 0;
    padding-left: 1.25rem;
    position: relative;
    color: var(--text-muted);
    font-size: 0.88rem;
    line-height: 1.6;
  }

  .highlight-box ul li::before {
    content: '→';
    position: absolute;
    left: 0;
    color: var(--accent-dim);
  }

  /* ─── Tags row ─── */
  .tags-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin: 1rem 0;
  }

  .tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    padding: 0.3rem 0.65rem;
    background: var(--tag-bg);
    border: 1px solid var(--tag-border);
    border-radius: 4px;
    color: var(--text-muted);
  }

  /* ─── Next / Prev Project Navigation ─── */
  .project-nav {
    max-width: 780px;
    margin: 0 auto;
    padding: 0 3rem 6rem;
    display: flex;
    justify-content: space-between;
    gap: 1rem;
  }

  .project-nav a {
    flex: 1;
    padding: 1.5rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    text-decoration: none;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
  }

  .project-nav a:hover {
    border-color: var(--accent-dim);
    transform: translateY(-2px);
  }

  .project-nav .nav-direction {
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
  }

  .project-nav .nav-title {
    font-family: 'DM Serif Display', serif;
    font-size: 1.1rem;
    color: var(--text);
  }

  .project-nav a.next { text-align: right; }

  /* ─── Footer ─── */
  footer {
    padding: 2rem 3rem;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--text-muted);
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 768px) {
    nav { padding: 1rem 1.5rem; }
    .project-hero { padding: 8rem 1.5rem 3rem; }
    .project-cover { padding: 0 1.5rem; }
    .project-content { padding: 0 1.5rem 4rem; }
    .project-meta-row { flex-direction: column; gap: 1rem; }
    .image-gallery.cols-2, .image-gallery.cols-3 { grid-template-columns: 1fr; }
    .project-nav { flex-direction: column; padding: 0 1.5rem 4rem; }
    footer { flex-direction: column; gap: 0.75rem; text-align: center; }
  }
</style>
</head>
<body>

<!-- ─── Nav ─── -->
<nav>
  <a href="../index.html" class="nav-logo">JS<span>.</span></a>
  <a href="../index.html" class="back-link">&larr; Back to Home</a>
</nav>

<!-- ─── Project Hero ─── -->
<div class="project-hero">
  <div class="project-hero-category">Building Energy</div>
  <h1>Smart Energy Audit Assistant</h1>
  <p class="project-hero-desc">
    An interactive Streamlit web application that provides personalized home energy scoring and retrofit recommendations through climate-aware HERS Index calculations, GIS-based climate zone detection, and automated seasonal consumption analysis.
  </p>
  <div class="project-meta-row">
    <div class="project-meta-item">
      <span class="label">Type</span>
      <span class="value">Custom Project</span>
    </div>
    <div class="project-meta-item">
      <span class="label">Year</span>
      <span class="value">2025</span>
    </div>
    <div class="project-meta-item">
      <span class="label">Role</span>
      <span class="value">Developer</span>
    </div>
    <div class="project-meta-item">
      <span class="label">Stack</span>
      <span class="value">Python, Streamlit, Plotly, Folium</span>
    </div>
  </div>
</div>

<!-- ─── Content ─── -->
<div class="project-content">

  <!-- Overview -->
  <div class="content-section">
    <div class="content-section-label">Overview</div>
    <h2>Project Objective</h2>
    <p>
      Homeowners often lack accessible tools to understand their building's energy performance relative to code baselines. This project builds a <strong>5-step interactive web application</strong> that walks users through location selection, building characterization, energy usage input, system evaluation, and delivers a comprehensive energy audit report with actionable retrofit recommendations.
    </p>
    <p>
      The app integrates <strong>ASHRAE/IECC climate zone detection</strong> using both US shapefiles (ClimateZones.shp) and a 70+ worldwide reference city database, ensuring accurate climate-adjusted baselines for any location globally.
    </p>
  </div>

  <!-- App Workflow -->
  <div class="content-section">
    <div class="content-section-label">Workflow</div>
    <h2>5-Step Audit Process</h2>
    <div class="timeline">
      <div class="timeline-item">
        <div class="timeline-date">Step 1 — Location</div>
        <div class="timeline-title">Interactive Location Selection</div>
        <div class="timeline-desc">Address search via Nominatim geocoding API with click-to-select Folium map. Automatically detects ASHRAE/IECC climate zone using shapefile polygon containment or nearest-city fallback with Haversine distance.</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-date">Step 2 — Building Info</div>
        <div class="timeline-title">Building Characterization</div>
        <div class="timeline-desc">Collects building type, year built, square footage, stories, basement condition, roof type/color, wall construction, and insulation level to build a complete envelope profile.</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-date">Step 3 — Energy Usage</div>
        <div class="timeline-title">Monthly Consumption Analysis</div>
        <div class="timeline-desc">Accepts monthly energy input as kWh or dollar bills (converted at local rate). Generates interactive Plotly bar charts with seasonal breakdown and average comparison.</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-date">Step 4 — Systems</div>
        <div class="timeline-title">HVAC &amp; Efficiency Features</div>
        <div class="timeline-desc">Evaluates heating/cooling systems, water heater type, window glazing, and efficiency features including solar panels, smart thermostats, and Energy Star appliances.</div>
      </div>
      <div class="timeline-item">
        <div class="timeline-date">Step 5 — Results</div>
        <div class="timeline-title">Energy Score &amp; Recommendations</div>
        <div class="timeline-desc">Calculates HERS Index, Energy Star score, and letter grade. Generates personalized upgrade recommendations sorted by payback period with estimated cost and annual savings.</div>
      </div>
    </div>
  </div>

  <!-- Climate Zone Detection -->
  <div class="content-section">
    <div class="content-section-label">Feature 1</div>
    <h2>Climate Zone Detection</h2>
    <p>
      A key challenge in energy auditing is accurately determining the <strong>ASHRAE/IECC climate zone</strong> for any global location. The app implements a dual-method approach:
    </p>
    <p>
      <strong>Primary method:</strong> GeoPandas reads the ClimateZones shapefile and performs point-in-polygon containment tests for US locations, extracting zone number and moisture regime (Humid/Dry/Marine) from the IECC21 and Moisture21 columns.
    </p>
    <p>
      <strong>Fallback method:</strong> For international locations or shapefile failures, the app calculates Haversine distances to 70+ reference cities worldwide and assigns the climate zone of the nearest city within 500 km.
    </p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dots"><span></span><span></span><span></span></div>
        <span>climate_zone_detector.py</span>
      </div>
      <pre><span class="keyword">def</span> <span class="function">get_climate_zone</span>(self, latitude, longitude):
    point = Point(longitude, latitude)
    matches = self.gdf[self.gdf.geometry.contains(point)]

    <span class="keyword">if not</span> matches.empty:
        zone_data = matches.iloc[0]
        zone_name = zone_data[self.zone_column]
        <span class="keyword">return</span> self._parse_zone_info(zone_name, zone_data)

    <span class="comment"># Fallback: nearest city from 70+ reference database</span>
    nearest = find_nearest_city_climate_zone(latitude, longitude)
    <span class="keyword">if</span> nearest:
        nearest.update(self._get_zone_characteristics(
            nearest[<span class="string">'zone_number'</span>], nearest[<span class="string">'zone_letter'</span>]
        ))
        <span class="keyword">return</span> nearest</pre>
    </div>
  </div>

  <!-- HERS Index -->
  <div class="content-section">
    <div class="content-section-label">Feature 2</div>
    <h2>HERS Index Calculation</h2>
    <p>
      The <strong>HERS (Home Energy Rating System) Index</strong> scores a home's energy efficiency on a 0-150+ scale, where 100 represents the 2006 IECC standard code home. The app computes this by comparing actual annual consumption against a <strong>climate-adjusted baseline EUI</strong> (kWh/sqft) specific to each ASHRAE zone.
    </p>
    <p>
      The baseline is further adjusted using multiplicative impact factors for building age, roof type, heating system efficiency, insulation quality, and smart features. The final score is mapped to an <strong>Energy Star score</strong> (0-100) and a <strong>letter grade</strong> (A+ through F).
    </p>

    <div class="code-block">
      <div class="code-header">
        <div class="code-dots"><span></span><span></span><span></span></div>
        <span>hers_calculation.py</span>
      </div>
      <pre><span class="keyword">def</span> <span class="function">calculate_hers_index</span>(self, features):
    actual_consumption = sum(features.monthly_kwh)
    actual_eui = actual_consumption / features.square_footage

    <span class="comment"># Zone-specific HERS 100 baseline (kWh/sqft)</span>
    zone_num = self._get_zone_number(features.climate_zone)
    reference_eui = self.hers_100_baseline.get(zone_num, <span class="number">8.0</span>)
    reference_consumption = reference_eui * features.square_footage

    raw_hers = (actual_consumption / reference_consumption) * <span class="number">100</span>
    <span class="keyword">return</span> int(min(<span class="number">250</span>, max(<span class="number">0</span>, raw_hers)))</pre>
    </div>
  </div>

  <!-- Seasonal Analysis & Recommendations -->
  <div class="content-section">
    <div class="content-section-label">Feature 3</div>
    <h2>Seasonal Analysis &amp; Recommendations</h2>
    <p>
      The app performs <strong>automated seasonal pattern detection</strong> by comparing winter (Dec-Feb), spring (Mar-May), summer (Jun-Aug), and fall (Sep-Nov) consumption averages. It flags issues such as high cooling loads (summer/winter ratio &gt; 1.5), excessive heating consumption, and high constant baseloads.
    </p>
    <p>
      Based on the building profile and detected issues, the system generates <strong>prioritized retrofit recommendations</strong> including estimated investment cost, annual savings, and payback period. Recommendations range from quick wins like air sealing ($300, 1-year payback) to major upgrades like heat pump installation ($7,000, 7-year payback).
    </p>

    <div class="highlight-box">
      <h4>Sample Recommendations Engine Logic</h4>
      <ul>
        <li>Building age &gt; 30 years + poor insulation: Recommend R-50 attic insulation upgrade</li>
        <li>Electric resistance heating: Recommend heat pump conversion</li>
        <li>Flat roof + dark color: Recommend cool roof coating</li>
        <li>Single-pane windows: Recommend Energy Star double-pane replacement</li>
        <li>No smart thermostat: Recommend programmable thermostat ($100, 2-year payback)</li>
        <li>Annual usage &gt; 15,000 kWh + no solar: Recommend rooftop solar installation</li>
      </ul>
    </div>
  </div>

  <!-- Technical Architecture -->
  <div class="content-section">
    <div class="content-section-label">Architecture</div>
    <h2>Technical Stack</h2>
    <p>
      The application is built entirely in Python using <strong>Streamlit</strong> for the interactive UI with a multi-step wizard pattern managed through session state. Key libraries include <strong>Folium</strong> and <strong>streamlit-folium</strong> for interactive mapping, <strong>GeoPandas</strong> with PyOGRIO for shapefile processing, <strong>Plotly</strong> for responsive data visualizations, and <strong>Geopy</strong> (Nominatim) for geocoding.
    </p>
    <p>
      The climate zone shapefile covers all US counties with IECC 2021 zone classifications. For global coverage, a reference database of 70+ cities across 6 continents provides nearest-neighbor climate zone estimation using Haversine distance calculations.
    </p>

    <div class="tags-row">
      <span class="tag">Python</span>
      <span class="tag">Streamlit</span>
      <span class="tag">Plotly</span>
      <span class="tag">Folium</span>
      <span class="tag">GeoPandas</span>
      <span class="tag">Shapely</span>
      <span class="tag">Geopy</span>
      <span class="tag">Scikit-learn</span>
      <span class="tag">HERS Index</span>
      <span class="tag">ASHRAE Climate Zones</span>
    </div>
  </div>

</div>

<!-- ─── Next / Previous Project ─── -->
<div class="project-nav">
  <a href="project-digital-twin.html">
    <span class="nav-direction">&larr; Previous</span>
    <span class="nav-title">Spring-Mass-Damper Modeling</span>
  </a>
  <a href="project-snow-detection.html" class="next">
    <span class="nav-direction">Next &rarr;</span>
    <span class="nav-title">Roof Snow Detection</span>
  </a>
</div>

<footer>
  <span>&copy; 2025 Joonseong. Built with care.</span>
  <span>Pittsburgh, PA</span>
</footer>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
  document.querySelectorAll('.content-section').forEach(el => observer.observe(el));
</script>

</body>
</html>
